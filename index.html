<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talking Hatchling Pro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        .character-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .character {
            width: 150px;
            height: 150px;
            background-image: url('./dcc87ta-3d556cc0-9b25-4a94-afcb-9cdffe707032.png');
            background-size: cover;
            background-position: center;
            border-radius: 50%;
            margin-bottom: 10px;
            transition: background-image 0.3s, transform 0.2s;
        }

        

        .stats {
            margin-bottom: 10px;
        }

        .stat {
            margin: 5px 0;
        }

        button {
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #45a049;
        }

        .menu {
            display: none;
            background: #ffffff;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 10px;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .phone {
            width: 150px;
            height: 300px;
            border: 5px solid black;
            background-color: #ddd;
            border-radius: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: absolute;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
        }

        iframe {
            width: 300px;
            height: 200px;
        }

        .background-menu {
    background: #fff;
    border: 2px solid #ccc;
    padding: 20px;
    border-radius: 10px;
    position: fixed;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 101;
}

@media screen and (max-width: 768px) {
            body {
                padding: 10px;
                background-color: lightblue;
                color: red;
            }
        }

        #shopMenu {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border: 2px solid black;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 1000;
}

#toggleShopMenu {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 15px;
    font-size: 16px;
    background-color: #008cba;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#toggleShopMenu:hover {
    background-color: #005f75;
}

#shopFeedback {
    margin-top: 10px;
    font-size: 14px;
    color: green;
}

    </style>
</head>
<body>
    <h1 style="background: #B8E1FC;
    background: radial-gradient(circle farthest-corner at center center, #B8E1FC 0%, #231421 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;">Talking Hatchling PRO</h1>

    <div class="character-container">
        <div id="character" class="character"></div>
        <div class="stats">
            <div class="stat">Hunger: <span id="hunger">100</span></div>
            <div class="stat">Cleanliness: <span id="cleanliness">100</span></div>
            <div class="stat">Happiness: <span id="happiness">100</span></div>
            <div class="stat">Coins: <span id="coins">0</span></div>
            <div class="stat">Apples: <span id="apples">0</span></div>
            <div class="stat">Level: <span id="level">1</span></div>
        </div>
        <button id="feed">Feed Apple</button>
        <button id="open-chest">Open Chest (-10 Coins)</button>
        <button id="shower">Shower</button>
        <button id="toggle-menu">Toggle Menu</button>
        <button id="save-progress">Save Progress</button>
        <button id="reset-data">Reset Data</button>
        <button id="show-phone">Show Phone</button>
        <button id="show-background">Show Background</button>
        <button id="reset-background">Reset Background</button>
        <button id="toggleShopMenu">Shop</button>
        <button id="NTC">Notice</button>

    </div>

    <div class="background-menu" id="background-menu" style="display: none;">
        <p>Choose a background:</p>
        <button id="background-1">City</button>
        <button id="background-2">Playground</button>
        <button id="background-3">Forest</button>
        <button id="background-4">White wall</button>
    </div>
    

    <div class="menu" id="menu">
        <button id="close-menu" style="float: right; font-size: 16px; background: red; color: white; border: none; border-radius: 5px; cursor: pointer;">X</button>
        <p>Hello dear player, this is the main menu!</p>
        <input type="text" id="player-name" placeholder="Enter your name">
        <button id="save-name">Save Name</button>
        <div id="leaderboard">
            <h3>Leaderboard</h3>
            <div id="leaderboard-entries"></div>
            <p>Please notice leaderboard is broken! it will be fixed soon</p>
        </div>
        <a href="./CHRlink.html">
            <button>Characters</button>
        </a>
        <br>
        <a href="https://jo23u.github.io/hatchlingnew/">Classic version</a>
        <a href="https://jo23u.github.io/hatchlingnew/hatchlingame+.html">Plus version</a>
        <h3>Watch this video if you want!</h3>
        <iframe id="reward-video" width="560" height="315" src="https://www.youtube.com/embed/U6ULeO8X1dI?enablejsapi=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <!-- Claim coins button -->
        <button id="claim-coins" style="display: none;">Claim 200 Coins</button>
        <div>
            <p>if the text is red you are on a small sized screen, if the text is black you are on a normal sized screen.</p>
        </div>
    </div>

    <div class="phone" id="phone">
        <p>Click below to earn apples!</p>
        <button id="earn-apples">Earn Apples</button>
        <button id="close-phone">Close Phone</button>
    </div>

    <div id="shopMenu" style="display: none;">
        <button id="close-men1" style="float: right; font-size: 16px; background: red; color: white; border: none; border-radius: 5px; cursor: pointer;">X</button>
        <button id="buyBoostPotion">Buy Boost Potion (30 Coins)</button>
        <!-- Inside your Shop Menu -->
<button id="infinite-states-button">Enable Infinite States (900,000 coins)</button>

        <p id="shopFeedback"></p>
    </div>

    <div id="NTCM" style="display: none;">
        <!-- Your editable content goes here -->
        <h2>Notice</h2>
        <p>Please make sure you save your data after buying or purchasing anything, after you save your data your data is safely stored in localstorage
            and even is there is an update it will still remain as it is.
        </p>
    </div>

    <script>
    let hunger = 100, cleanliness = 100, happiness = 100, coins = 0, apples = 0, level = 1;
    let playerName = '', leaderboard = [];
    let infiniteStates = false; // Initially set to false
    let stateDecrementInterval;

// Initialize YouTube Player API
function onYouTubePlayerAPIReady() {
    videoPlayer = new YT.Player('reward-video', {
        events: {
            'onStateChange': onPlayerStateChange
        }
    });
}

// Track the player's video state (playing, paused, etc.)
function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.PLAYING) {
        let checkTimeInterval = setInterval(() => {
            let currentTime = videoPlayer.getCurrentTime();
            if (currentTime >= 45) { // Reward after 45 seconds
                document.getElementById('claim-coins').style.display = 'block'; // Show the claim button
                clearInterval(checkTimeInterval); // Stop checking the time once the condition is met
            }
        }, 1000);
    }
}

// Handle claim coins button click
document.getElementById('claim-coins').addEventListener('click', () => {
    coins += 200; // Add 200 coins to the user's total
    alert('You have claimed 200 coins!'); // Notify the user
    document.getElementById('claim-coins').style.display = 'none'; // Hide the claim button after claiming
    updateStats(); // Update the stats
});

// Initialize the YouTube Player API
const scriptTag = document.createElement('script');
scriptTag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(scriptTag);


    function updateStats() {
        document.getElementById('hunger').textContent = hunger;
        document.getElementById('cleanliness').textContent = cleanliness;
        document.getElementById('happiness').textContent = happiness;
        document.getElementById('coins').textContent = coins;
        document.getElementById('apples').textContent = apples;
        document.getElementById('level').textContent = level;

        if (hunger < 10 || cleanliness < 10 || happiness < 10) {
            document.getElementById('character').style.backgroundImage = "url('Picsart_25-01-10_00-23-56-807.png')";
        } else {
            document.getElementById('character').style.backgroundImage = "url('dcc87ta-3d556cc0-9b25-4a94-afcb-9cdffe707032.png')";
        }
    }

    document.getElementById('feed').addEventListener('click', () => {
        if (apples > 0) {
            apples--;
            hunger += 10;
            if (hunger > 100) hunger = 100;
            level++;
            updateStats();
        } else {
            alert('You have no apples!');
        }
    });

    document.getElementById('shower').addEventListener('click', () => {
        cleanliness += 20;
        if (cleanliness > 100) cleanliness = 100;
        updateStats();
    });

    document.getElementById('open-chest').addEventListener('click', () => {
        if (coins >= 10) {
            coins -= 10;
            const reward = Math.floor(Math.random() * 11) + 10;
            apples += reward;
            alert(`You received ${reward} apples!`);
            updateStats();
        } else {
            alert('Not enough coins!');
        }
    });

    document.getElementById('toggle-menu').addEventListener('click', () => {
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    });

    document.getElementById('save-name').addEventListener('click', () => {
        if (playerNameInput.value && !leaderboard.some(player => player.name === playerNameInput.value)) {
            playerName = playerNameInput.value;
            leaderboard.push({ name: playerName });
            updateLeaderboard();
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        } else {
            alert('You can only appear once on the leaderboard!');
        }
    });

    document.getElementById('save-progress').addEventListener('click', () => {
        localStorage.setItem('characterGame', JSON.stringify({ hunger, cleanliness, happiness, coins, apples, level }));
        alert('Progress saved!');
    });

    window.onload = () => {
        const savedData = JSON.parse(localStorage.getItem('characterGame'));
        if (savedData) {
            ({ hunger, cleanliness, happiness, coins, apples, level } = savedData);
            updateStats();
        }
        const savedLeaderboard = JSON.parse(localStorage.getItem('leaderboard'));
        if (savedLeaderboard) {
            leaderboard = savedLeaderboard;
            updateLeaderboard();
        }
    }

        

    setInterval(() => {
        coins += 90;
        updateStats();
    }, 60000); 

    setInterval(() => {
    if (!infiniteStates) {  // Only decrement if infiniteStates is false
        hunger--;
        cleanliness--;
        happiness--;
        if (hunger < 0) hunger = 0;
        if (cleanliness < 0) cleanliness = 0;
        if (happiness < 0) happiness = 0;
        updateStats();  // Call the updateStats function to reflect the changes
    }
}, 5000);  // Adjust this interval as per your game needs

    document.getElementById('reset-data').addEventListener('click', () => {
        const confirmReset = confirm('Are you sure you want to reset all your data?');
        if (confirmReset) {
            hunger = 100;
            cleanliness = 100;
            happiness = 100;
            coins = 0;
            apples = 0;
            level = 1;
            leaderboard = [];
            localStorage.removeItem('characterGame');
            localStorage.removeItem('leaderboard');
            updateStats();
            updateLeaderboard();
            alert('Data reset successfully!');
        }
    });

    function updateLeaderboard() {
        leaderboardEntries.innerHTML = '';
        leaderboard.forEach(player => {
            const entry = document.createElement('div');
            entry.textContent = `${player.name} -`;
            leaderboardEntries.appendChild(entry);
        });
    }

    document.getElementById('earn-apples').addEventListener('click', () => {
        const earnApplesButton = document.getElementById('earn-apples');
        if (!earnApplesButton.disabled) {
            apples++;
            updateStats();
            earnApplesButton.disabled = true;
            earnApplesButton.textContent = "Cooldown (30s)";
            let cooldownTime = 30;

            const cooldownInterval = setInterval(() => {
                cooldownTime--;
                earnApplesButton.textContent = `Cooldown (${cooldownTime}s)`;
                if (cooldownTime <= 0) {
                    clearInterval(cooldownInterval);
                    earnApplesButton.disabled = false;
                    earnApplesButton.textContent = "Earn Apples";
                }
            }, 1000);
        }
    });

    const showPhoneButton = document.getElementById('show-phone');
    const closePhoneButton = document.getElementById('close-phone');
    const phone = document.getElementById('phone');

    showPhoneButton.addEventListener('click', () => {
        phone.style.display = 'flex';
    });

    closePhoneButton.addEventListener('click', () => {
        phone.style.display = 'none';
    });

    let patCooldown = false;

    const character = document.getElementById('character');

    character.addEventListener('click', () => {
        if (!patCooldown) {
            patCooldown = true;
            happiness += 10;
            if (happiness > 100) happiness = 100;
            updateStats();
            character.style.transform = "translateY(-20px)";
            setTimeout(() => {
                character.style.transform = "translateY(0)";
            }, 200);
            new Audio('Yay - Sound Effect.mp3').play();
            setTimeout(() => {
                patCooldown = false;
            }, 1000);
        }
    });

    // Handle the Show Background Button click
document.getElementById('show-background').addEventListener('click', () => {
    const backgroundMenu = document.getElementById('background-menu');
    backgroundMenu.style.display = backgroundMenu.style.display === 'block' ? 'none' : 'block';
});

// Handle background changes
document.getElementById('background-1').addEventListener('click', () => {
    document.body.style.backgroundImage = "url('original-232adf446d5619c49c4ffb6247751762.webp')";
    document.getElementById('background-menu').style.display = 'none';
});

document.getElementById('background-2').addEventListener('click', () => {
    document.body.style.backgroundImage = "url('1oh3prd5lsr71.webp')";
    document.getElementById('background-menu').style.display = 'none';
    document.body.style.backgroundRepeat = 'no-repeat';
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
});

document.getElementById('background-3').addEventListener('click', () => {
    document.body.style.backgroundImage = "url('ai-generated-ai-generative-outdoor-nature-adventure-forest-walk-path-road-adventures-background-graphic-art-photo.jpg')";
    document.getElementById('background-menu').style.display = 'none';
    document.body.style.backgroundRepeat = 'no-repeat';
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
});

document.getElementById('background-4').addEventListener('click', () => {
    document.body.style.backgroundImage = "url('white-cement-wall-texture-backgrounds_707519-24233.avif')";
    document.getElementById('background-menu').style.display = 'none';
    document.body.style.backgroundRepeat = 'no-repeat';
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
});

// Handle the Reset Background Button click
document.getElementById('reset-background').addEventListener('click', () => {
    document.body.style.backgroundImage = ''; // Reset the background image
    document.getElementById('background-menu').style.display = 'none'; // Hide the background menu
});

document.getElementById('close-menu').addEventListener('click', () => {
    document.getElementById('menu').style.display = 'none';
});

document.addEventListener("DOMContentLoaded", () => {
    const toggleShopMenu = document.getElementById("toggleShopMenu");
    const shopMenu = document.getElementById("shopMenu");
    const buyBoostPotion = document.getElementById("buyBoostPotion");
    const shopFeedback = document.getElementById("shopFeedback");

    let boostCooldown = false;

    // Toggle shop menu visibility
    toggleShopMenu.addEventListener("click", () => {
        shopMenu.style.display = shopMenu.style.display === "none" ? "block" : "none";
    });

    // Purchase boost potion
    buyBoostPotion.addEventListener("click", () => {
        if (boostCooldown) {
            shopFeedback.textContent = "Potion is on cooldown. Please wait!";
            return;
        }

        if (coins >= 30) { // Assuming 'coins' is a global variable in your existing code
            coins -= 30;
            shopFeedback.textContent = "Boost potion activated! All stats increased.";
            boostCooldown = true;

            // Directly update game stats (replace these with your actual game variables)
            hunger = Math.min(hunger + 30, 100); // Replace 'hunger' with your variable
            cleanliness = Math.min(cleanliness + 30, 100); // Replace 'cleanliness' with your variable
            happiness = Math.min(happiness + 30, 100); // Replace 'happiness' with your variable

            // Optionally log updated values for debugging
            console.log("Updated stats: ", { hunger, cleanliness, happiness });

            // Start cooldown timer
            setTimeout(() => {
                boostCooldown = false;
                shopFeedback.textContent = "";
            }, 2 * 60 * 1000); // 2 minutes cooldown
        } else {
            shopFeedback.textContent = "Not enough coins to buy the potion.";
        }
    });
});


document.getElementById('close-men1').addEventListener('click', () => {
    document.getElementById('shopMenu').style.display = 'none';
});


document.getElementById('infinite-states-button').addEventListener('click', () => {
    if (coins >= 900000 && !infiniteStates) {
        coins -= 900000;
        infiniteStates = true;
        alert('Infinite states enabled! Stats will no longer decrease.');
        updateStats();  // Update stats to reflect the change in state
    } else {
        alert('You dont have enough coins!');
    }
});

// Get the button and the menu
const toggleMenuButton = document.getElementById('NTC');
const customMenu = document.getElementById('NTCM');

// Add the event listener to toggle the menu visibility
toggleMenuButton.addEventListener('click', () => {
    // Toggle the menu's display between 'none' and 'block'
    if (customMenu.style.display === 'none' || customMenu.style.display === '') {
        customMenu.style.display = 'block';
    } else {
        customMenu.style.display = 'none';
    }
});


</script>
<p style="background: #B8E1FC;
background: radial-gradient(circle farthest-corner at center center, #B8E1FC 0%, #231421 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;" >V5 beta (prev version V4)</p>
</body>
</html>

